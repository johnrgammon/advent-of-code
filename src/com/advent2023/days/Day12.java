package com.advent2023.days;

import com.advent2023.days.utils.Utils;

import java.util.*;

public class Day12 {

    private static final Long PART_ONE_DEMO_EXPECTED_RESULT = 21L;
    private static final Long PART_TWO_DEMO_EXPECTED_RESULT = 525152L;
    private static final Long PART_ONE_EXPECTED_RESULT = 7090L;
    private static final Long PART_TWO_EXPECTED_RESULT = 6_792_010_726_878L;
    private static final String DEMO_DATA;
    private static final String DATA;
    static {
        //region demo_data
        DEMO_DATA = """
                ???.### 1,1,3
                .??..??...?##. 1,1,3
                ?#?#?#?#?#?#?#? 1,3,1,6
                ????.#...#... 4,1,1
                ????.######..#####. 1,6,5
                ?###???????? 3,2,1""";
        //endregion
        //region data
        DATA = """
                .#?#???????.????# 1,2,3,2,1
                ?????????? 1,1,4
                ????.??.??.??? 1,2
                ??????#??????.? 2,4,1,1,1
                ?.?#??.?.#####???? 2,9
                ???#?.??.???? 3,1,1
                .???????.?# 2,3,2
                ?.#????#??.#? 4,3,1
                ..?????.??????###?? 1,6
                .####?????#.?.?#? 7,1,2
                #????#????.??????.#? 1,1,5,2,1,2
                .??#?.#???#? 1,1,1,1
                .??#???##.?????? 7,2,1
                ????????????.??#???. 1,1,7,1,1
                ?????????# 1,5,1
                ?#?.#????#????#???? 2,2,1,4,1
                ?.??#????### 3,3
                ????##??????##??. 1,3,9
                .????????. 1,2
                ?#.????#.. 1,2,1
                ?.??#????.##??. 1,1,3,1,4
                .??.??#?##?##?? 1,5,2
                ?#.?????.?#?? 1,1,2,1
                ?#??.?#?#??????#?#? 3,14
                #???##??.?? 8,1
                #?.#??????##?.? 1,1,7,1
                ??.#??#??# 1,1,5
                ??#???##?###??.??? 13,1,1
                ?##????#????? 9,1
                ?.??.##?.?? 1,3
                ?#??#?.??? 5,1,1
                ???#?#?.???#?#?#. 6,8
                ??..?#?#????? 2,5,1,1
                #?#?##.??.?#??#?.?? 6,1,5,2
                ?.??#.#????????? 1,3,1,1,2
                ?.??.????#?.???#??? 1,1,1,3,7
                ??###?.??##?#? 5,5
                ????#???.???#?? 7,2
                ????.?????# 3,1
                #?##??.?.?##??#?#?# 5,1,7,1
                ??##.#?.#?..?? 4,1,2,1
                ????.???..#?#? 4,2,3
                ???????#.????? 1,6,4
                #??????#..?.??.?#??? 3,4,1,1,3,1
                ?#?##?..#?? 4,1
                ?##???.#???#?#??? 4,1,3,1
                .?#??##?????#? 8,3
                ?.?.?????#??????#?? 1,8,3,1
                ????#?.??#????. 4,5
                ?#..#??????#?.? 1,1,5,1
                ??##??#??.?. 2,3
                .??????.#??? 5,3
                ????????#??? 2,2,1,1
                ..#?#?##???????#?? 8,4
                ?????.??????.#?#??? 3,6,1,1,1
                .??.??.#?#.#?????#.# 2,1,1,1,7,1
                ..??.????????#??? 1,9
                ??.?????#?.???? 1,3,1,3
                ???.?.#????? 2,1,3
                .#????????? 1,5,1
                ????#??.???#????? 2,8
                ????.??.??#???? 2,1,1
                ..?.?????? 1,4
                ?#?#.#??.?#??#.??? 3,3,4,1,1
                .#..???.?? 1,2
                ?.??#??#???# 2,2,1
                ##???.??????? 5,1,2
                .#???##??????.??# 1,5,2,1,3
                #.?.??#????? 1,1,3,1
                .??##?#.?#?#??# 5,1,1,1
                ?????#?.??.?.?#??? 1,2,2,1,1,1
                ??##?????? 1,5,1
                .?.???????#.?? 1,3,1
                ..???????#?##?#?? 3,9
                ??.?#????????#?..#?? 1,12,1
                ..??#?#??..????.? 1,5,3,1
                .#?.?...?.??. 1,1,1
                ??#??.?#??????.?? 4,1,1,1
                .#??##??#?? 1,6
                ??..#???.???.? 1,1
                ???#??..?. 6,1
                ??.??.#?????#.?#?? 2,4,2,2
                ???..?????.?#??#.?? 1,4,5
                ...?#??#??..??#?##? 6,4
                .?#?##?.??.??##??#.. 6,7
                ???????#???? 2,4
                #?.#?????#??..??? 1,2,4,3
                ?????????#? 1,6,1
                ?.?##??.#.? 4,1
                #?????#.?.?#??#??? 1,5,1,1,2,1
                ???.?????.#??#.?# 1,4,1,1,1
                ..?..?#???..?.?#? 4,1
                ##.??????##??#???? 2,1,1,2,1,2
                #?.#????#?#????#? 2,1,3,7
                .?#?##?#????#???? 12,1
                ?????????#??? 1,3
                ????##?.#?????#. 1,2,2,2
                #.?.????#???.#??#??? 1,1,3,4,5
                ?#??#?#.?##.?####? 7,3,4
                ????????#?#. 3,2,1,1
                ??????#?#??#?? 6,2
                ???.????...?? 2,4
                ??##???##..?? 5,2
                ??#.#?.?#??? 1,2,2,2
                ?#????#??#?????? 1,1,2,1,2
                ??.?#?#?#??..?????? 6,2
                ???????#??.??????#? 1,4,3,2,1,2
                ..#??#???##??? 9,1
                ???...????? 1,1,2
                ??#??..???#???.#? 1,3,1,4,1
                ??.#?.???#?#?.? 2,2,1,4,1
                #????##??#..?? 1,5
                .????.?#??? 2,1
                ?#?#.?.?.????## 1,1,1,1,2
                ???#?????.?#??#.? 4,1,4,1
                ?.??.?.?##?? 1,1,1,4
                ##??#????#.?..#?# 3,4,1,1,3
                .#..??.??#?? 1,2,3
                ????.##.?? 1,2,1
                #..?????????# 1,5,2,1
                ?#?#????#?????? 2,1,3,2,1
                ?#?.?##?#?? 2,5,1
                ??#????.??? 7,1
                ?#???#?.?.?.??. 1,4,1,1
                .????##.#.??#??#??? 6,1,1,7
                .???????#?##?? 2,7
                ?.?#?#???#?#.??.???. 1,1,1,5,2,3
                ????#?#?.?????.# 6,2,1
                ???..#??.?..#??.??. 2,1
                ?.?.???#?.. 1,3
                ?#????..???.?? 3,1,1,1
                #??.?.?#?? 3,1,1
                ?????.????? 4,5
                ??????????#??#??? 4,1,1,1,4
                ??#?.???#??.?????#?# 2,1,4,1,1,1
                ###.??.?#???#?? 3,1,6,1
                ???##???.?##???##?? 5,8
                ..???##???#?.# 6,2,1
                ??..???????#???? 1,1,3,1,1
                ..????#.???. 1,1,3
                ???..??#??#???#??? 2,4,2
                ??#??#???????##? 1,1,5,2
                .#??#?###..?????#.. 8,2,1,1
                .?????????? 1,4
                ??##???????.##?.?? 5,2
                ?###?.????#??##??#?? 5,11,1
                .?##??????? 3,1,2
                .?##???.?#?#?## 4,7
                ?????##??? 2,4,1
                ????##????#??????? 10,1,1
                ????#???#.?..???? 1,1
                #??#????.?.????? 4,1,1,2
                ?#?.?.??#?? 1,1,2
                ?????.?#?. 4,1
                ?.???????.????? 1,1,1,1,2
                ?.???..?????#??#.? 3,8
                ????#?.??? 3,1
                ???#?#??#???##??? 1,12,1
                ?#?..#???.?????????? 2,4,8
                ?#???#?????#????? 3,1,5,3
                ?..?.#???.?##?? 1,1,2
                ?.??.??#?#?#?? 1,7
                .?##?#??.?# 5,1
                #??#?##??#?#?. 1,4,2,1
                .????####. 2,5
                ????#???????? 7,3
                ?#?.?#.????.? 1,2,1,1
                ????????????#??? 1,10,1
                .??.???#???????..?? 1,6,1,1,2
                ??.??.?????? 1,3,1
                ?##?????#???.? 3,2,1,1
                ?.??#??.?.????.??.?? 1,4,1,1,1,2
                ??##????????#????? 1,2,2,8
                ???#??##..?.?? 8,1,1
                ??????..?#? 3,1
                ??.??????#?#?.?.? 1,6
                ?#????#???#?#?.?? 13,2
                #?????#???##??? 8,2
                ???.??##.?.. 1,4,1
                ?.?????.##???###?#?? 1,10
                ?#?.#.?#??????. 1,1,8
                ?.???#???.?.#?#?#.? 6,5
                #???#??#???? 1,7
                ??###????#?##?#.#?? 12,1,1,1
                ????.#.?#???.?.? 1,1,2,2,1
                ??????#??????..?? 1,1,8,1
                .??????#??? 2,1,3
                .???.????? 2,1
                .?#?#???#???#?#?.# 4,1,3,1
                ##?.???????.??? 2,1,2,2,1
                ?????..???? 2,2
                ?##?#???????#.? 7,1,1,1
                ?#.#???.?.##??###??? 1,1,1,1,10
                ???#?#?????????##? 1,1,5,1,1,3
                ??.??????. 1,4
                ?#??##???# 5,1
                ?.??.#?#???????##?? 1,1,3,1,1,4
                ??.????#???#?#????? 6,7
                ?..#?#?????? 5,1
                ??????.??????? 3,4
                ???#?#?#??##??? 1,1,1,7
                ????#?.?#??.?? 5,3
                ???#.#????##???? 3,8,2
                ?#?#??.??#.?? 4,3
                ##??#???..? 5,1,1
                ?##?#.?##? 4,3
                ??..?.?#??.?????#?? 4,3
                #????#?##??#?.?.???. 1,7,3,1,1
                ?.#?#??##??.#?#?? 8,4
                ?#..??#?#? 2,1,2
                ????##??#? 1,2,2
                .????#??##??????? 5,3,2,1
                ###?????#?.??????? 3,2,1,2
                ?.#?.?#?#??#? 1,4,2
                ???.????##...?????? 2,3,2
                ?#??##??????#? 5,1,1,1
                ???#?????? 5,1
                ?.###?????#?? 3,5,1
                .???.?????#?.?? 1,6
                .???????.. 1,1
                ??????#????#?# 7,1,1,1
                ??.???#?????#???. 1,13
                .???#????? 1,4,1
                ????#??##.?# 1,1,2,2
                .?#???#???##??..#.# 7,4,1,1
                ..????.?????#? 3,3
                ??#?#..??? 5,3
                ??????????.? 1,6
                ?.?#.??..?##??????#? 2,1,8,1
                ??...#??????##? 1,2,1,3
                .????.??#.???#?? 1,1,3,1,2
                ?#???????? 1,3
                .?#.??#.???#?.? 2,1,3,1
                ?#????..????.# 1,2,2,1
                ??.?##???#...#?? 6,2
                ??#???#????.? 3,2,2
                ?????#???#????? 2,6
                .#?.?.#.???? 1,1,1,3
                ?###?#??#??#.??? 3,1,1,1,2
                .??##??????#??#??.#? 6,1,1,2,1
                ...?????#?##????? 1,1,8
                .#??.###???#? 2,3,3
                ?.#?.??????#??##? 1,8
                ??#?##????????#? 6,1,2
                ??.??#?.######?.?.? 3,7,1
                ?#??#????.?????####? 6,1,2,6
                ????????#.???#?? 4,2
                .##??#?#???????.?#? 3,1,3,1,1,3
                .??.?????? 2,1,2
                ??.???.????. 1,1,1,1
                #?.?#??#???. 1,4
                ??#??#????##?? 5,4
                #??????????? 1,2,2
                ???.?#??.??#?? 3,3,3
                ?????.???? 1,1,2
                ?...??.#.????##??? 1,1,1,7
                .????????.? 2,2,1
                ?.?#.#?#?????#???? 2,1,3,5
                ????.#?.????? 2,1,3
                ??.#???.??????##?##? 1,2,1,1,7
                ??#?????.??#?#.. 5,4
                .##?#?#??#????.? 6,5
                ??..??????#???#.#?? 2,1,1,7,1,1
                #???.??.?? 3,1
                .??#??#??? 4,3
                #????.#??.????? 2,2,1,1,3
                .?#.???.??.??.?. 1,3,1,1,1
                ?????#????#? 1,1,1,1
                .??#???.#.? 5,1
                ?.??#????#?#??#??#?# 1,4,4,2,1,1
                ?.????.???#? 3,4
                ??#?.????#???###?#?? 2,2,1,8
                ##???.?#?#??? 2,2,1,3
                ?.???.?#??? 1,3,1
                ??????????? 3,2
                #.??#????## 1,8
                ??#?#?.??.?? 1,4,1,1
                ??#????#?.#??? 7,4
                ?????#????#??#???.? 6,6
                ???..#.????#????#.? 1,1,1,2,7,1
                #?###???????????.?. 5,4,1,2,1
                ..???##?.???#??#??? 3,7
                .#???#.?#.?.? 2,2,2,1
                ##?????????????###?? 4,2,1,2,5
                ??.?#??#???? 1,2,1,1
                ?.#.??????.?#?##?#? 1,1,2,2,7
                ???..????. 1,3
                #????#?.??#?#. 2,3,2,1
                ?.?##.???.? 3,1
                ??#?#####?##?##.???. 9,5,1,1
                .????????## 3,2
                ??#????#.????#????? 3,2,5,1,1
                ??.??##??? 2,2,1
                .??#??.??#??#? 4,5
                ???????#.?#. 1,1,1,2
                ?#.??#?????#??#.?#.? 1,12,2
                ?.#???#.?.?. 1,1,1,1
                .????????#?#??#?? 2,8,1
                ??..?#?.###? 1,4
                ??##????#??.???#? 4,3,1,1,2
                ?????.????? 2,3,1
                ???#????#????#??? 1,10
                ??????##?#???.?????? 6,4
                ..??..#?????#?#??? 2,7,1,1
                #?#?????.#?? 1,1,1,1
                ?.???#???#??#?? 1,1,10
                ?????#?.#...? 5,1,1
                ?????.??.????????## 2,1,1,10
                .???.?????. 1,1
                ???#?????.?????###. 1,2,2,2,4
                ?.??????.??#???? 1,2,1,2,2
                ????.????. 2,2
                ?.????.?#??????? 1,3,2,4
                .?????#?.??#???? 1,4,1,4
                ???.?.??..? 3,2
                ?.??#?????? 4,1
                ##????#????#. 9,1
                ??.????????? 2,3,1
                ?#????#.??.?????? 4,1,2,3,1
                ????..??#?#? 1,5
                #???###???.????. 1,5,3
                ??.???#.????#??#.# 1,4,2,5,1
                .??##?????.?##??. 4,3,3
                ??.#.##?.?????? 1,1,2,1,1
                ?#.?????????? 1,1,1,3
                ?#..??#???#??#?.?#?? 2,4,3,2,2
                ?.?..???.#??. 1,2,2
                ?.#?#?...?????? 3,5
                .#?.???????. 2,1
                ??????.????#?## 1,2,7
                ???.????#?????? 3,4,1,1
                .????#?#??.#? 3,4,1
                ?.?#??#??#??#.????# 10,1,1
                ??.??.??????#? 1,1,4,2
                .#?????#??? 1,5,2
                ?.????????? 1,1
                ?#?#??????? 6,1
                .#?##?.????????## 5,1,5
                ????##?#???????? 5,4
                ..?#.#??#?#???#??#?# 2,4,1,1,4,1
                .?##?.?#.??? 3,2,2
                ?.??#??##.?##??? 7,3
                ?.#????.???? 4,1,1
                #???.??.????##? 2,1,2,1,3
                .##?..????????#?? 2,4,1,2
                ????#?#.????? 5,2,1
                ???#?.?????#?????#. 3,11
                ?????###.#???. 8,1,2
                ??.???..?#??#.?.??? 1,1,1,4,1,3
                ..???.??.? 1,1,1
                ?###???.#???#???# 6,1,2,2
                #?.????..???????? 1,1,1,1,5
                ??#???#?.?#??.?#? 7,3,1
                ??##?.????#??.????. 5,5,1,1
                ?????#??##?#?? 3,8
                .???###??????.??# 8,1
                ??##??.???# 4,1
                ?.??#?#??#?. 2,5
                #???.#??????. 4,1,1,1
                ???#.???#.#??#? 2,3,1,3
                ?????##???#.??..# 1,6,1,1,1
                .#?.?#?#????##???? 2,13
                ??#????.#??#??#??? 1,1,1,1,7
                .#.?.#?.???. 1,2,2
                ?#???#?#?.???#??#??? 8,7
                ??????.??? 2,1,3
                #??????.???#? 3,3,1,2
                ???.#????? 1,1,1
                ???..?##?#?#??.?.# 1,9,1,1
                ..????#??#?????? 3,5,1
                .???.??#?????.. 1,6
                ?#???#???????# 5,4
                ..?#????#?. 2,3
                ????#..#??# 4,1,1
                .???##?#????#?#? 1,5,6
                ???##??#???#?#..? 7,4
                ???#??????#??.?? 6,1,2,1,1
                .???????..??.. 1,5,1
                ?????.????# 4,2,1
                .???#??#??#??.? 5,2,1
                ??.#?????. 1,1,2
                .?.????.??#.???# 1,1,1,1,4
                ??##???.?.????? 4,1,1,1
                .?#?.?????????? 3,2,1,1
                ???#???.??##??# 4,1,7
                ?????????###????. 7,6
                ????..#?????#???? 1,1,4,3
                ??#?#?##?????# 3,2,3,1
                ???.??????.##.? 2,1,1,2,1
                .???#????? 3,1
                ?????.???#???#? 5,2,3
                ##????????#???#??##? 2,1,2,4,1,3
                .?.#??????.?. 1,2,1,1
                .?.?#?.??.?# 1,1,1,2
                ??#?.???.?? 2,2,1
                ??????##.????#???? 1,6,5,2
                .?????.???#??#?#.. 3,9
                ?##???#..#?.??? 6,2
                ??..??.????#?# 1,1,3,3
                #??#???.?#?? 1,3,1,2
                .#?#.#???? 3,1,2
                ?????..???## 2,1,2
                ???#??#???.#???#.? 5,1,1,2,1
                ?##????.#?#?#??#?.?? 5,1,9,1
                ?.?????#?.?##???#?## 4,1,9
                .#???#...??.?. 5,1
                .#??#??#?.#??..#??? 1,6,2,3
                ??##..?.##?#??.? 3,1,2,2,1
                ?????##????#????.? 9,4
                #?.??????.?. 2,1,3,1
                #???????????????#?. 3,12
                ???.?..??#?#?????? 2,7,2
                ?#####????#???#??#?? 11,5
                ??.?.#????? 1,5
                ????#..?#???? 1,1,3
                #????#?.??#..?#.? 6,3,2
                ??###???##???..??? 9,1,2
                ??..?#?#???????.? 1,7,1,1,1
                ?#?.##?##??.#??. 2,5,2
                ????????#...? 6,1
                #?????#??##?.?..#??? 7,3,1,1,1
                ?#?.????????? 1,7
                #???????#.??? 5,3,1
                ?#?#???#.??? 7,2
                ??#??.?#????.?? 1,1,1,3,1
                ?.#???.??? 1,1,1
                ?????.???##?? 1,5
                .??##???.? 6,1
                ??.###?##? 1,6
                ??.??????#?##. 1,1,1,4
                ????.???.?#??##?. 1,6
                ?????#??#?#?.#?????? 3,4,2,2
                ?????.?.?#? 3,1
                #???#????.?#? 1,2,1,2
                ##??.????#??##??? 2,9
                ??#???????????.?.??? 1,1,9,1,2
                ???#?##?.?##? 8,3
                ?.?#?##????????.#.?? 7,2,1,1,1
                ?#??????#??#?#?? 2,11
                ????.?#?#?#????????. 3,6,5
                ????.??#.???..??.. 1,2,1,3,2
                ?#.??.?.??.??? 1,1,1,3
                ???#??##???.#?#?? 3,3,2,5
                .#??###???? 1,3,1
                .?.????..? 1,1,1
                .?#???#..? 1,1
                ###?#?.#?#.???.?? 5,3,1,1
                ?.???.####?#?#? 1,4,3
                .#?#?.#???.???? 1,1,2,1,1
                .????????.???? 2,1,2
                ??##????#??????#???? 4,12
                ?#?????#?????.??? 2,3,6,2
                .????????#??? 1,4
                ?????????###??###?? 3,8
                ???????#?.? 5,2,1
                ###.??.?##??###. 3,1,7
                ?????#?#??#???#.? 1,12,1
                .????#????#??#.?? 13,1
                ..???????#??.??.?? 4,1
                ?????#?#?#???#??? 1,9,1,1
                ??##.????.? 4,1,1
                ????.??..##????#. 3,1,7
                .??.?#.???. 1,1,1
                ??#??#?#?.???# 5,1,1,2
                ?####??#???.????#.? 5,3,4
                ?#???#????## 7,2
                .#??#??#??.##? 4,2,3
                ?.#???#???.?????? 1,2,6
                ?..?????#?##???????? 10,3
                ?#?.?????###??#????? 3,1,7,2
                ??????##??#?#???#.. 2,3,8
                #?#?????#?. 4,1,1
                ????#?#?.#.??????? 2,3,1,4
                ?????????#??????.? 1,9
                ?????#??????? 2,3,1
                #?#??..?##???. 3,5
                ???#???...??#??#?? 1,1,1,3,1,1
                #?.???.???? 1,1,4
                ##?#??#?###?.??. 4,6,2
                #??????????#?#??. 1,14
                .?#???##???.??.???? 3,3,1,1,1,2
                #?.????#???#?.????? 1,1,4,1,1,1
                #??#?..??#??#. 2,2,6
                ??.????????#??.??? 1,1,1,1,3,1
                .?..?????###?. 1,2,4
                ??#?#?#?#???#? 8,1
                .#?#??.?#??#?????? 4,8
                ?.??###??.?. 5,1
                ???##????.#? 1,4,1,1
                ??.???.??????.? 3,4
                ?.????.??#? 3,3
                ??#??##?.#?.? 1,3,2,1
                ??#?????????#?? 4,4,1
                ?#??????.##????. 2,1,1,2,1
                ?###??#??#?????#??# 6,10
                ???.#???????? 2,8
                ????????#???#????. 1,1,3,2,2
                .?????..??#?#?. 1,1,5
                ?.????#???.? 1,1,5,1
                ##??#???.#?. 3,3,1
                ????.???.?????#?##? 2,1,1,1,4
                ?#?##.????...?? 5,1,1,2
                #?.?.??.#????#??#??? 1,1,10,1
                ????????##??????#?? 4,6,4
                ?????#??.#.. 1,4,1
                ?????#??#?.. 3,4
                ??#?????????#??# 1,11
                ?????.??#??.????? 1,4,3
                ?.?#.?????###?#.??. 1,2,1,6,1
                .???.???#??.???##?# 2,4,5
                ?.???#.???#?###??# 1,1,1,1,5,1
                ??#.#?????????? 1,1,2,5,1
                .??.????##????.??? 2,2,7,1
                ??..??#???????.??..? 1,7,1,1
                ???.?.???..? 1,1,3,1
                ????..??.?#???.??. 2,1,1,2,1,1
                ?###???#???????## 4,2,3,2
                .?##??.#??? 5,1
                ?#??##?#?#??#?#???. 9,4
                .##?#?.##?????. 4,2,1
                ??#???????? 3,3
                ??#??#???#?..??#? 5,3,1,1
                .??#??#?????.?.#??? 10,1,1
                ??#???.???? 5,1
                #????#???.?? 4,3,1
                .?##?????#? 6,2
                .##?#?##???????. 7,5
                ?#??.??#????#??#??? 1,5,2,4
                ???#???.#??#..?#??? 7,2,1,4
                ?????.???.?.??.??. 1,2,1
                ???.#.?.????? 1,1
                ????????#?#?# 2,2,1,3
                ?#???????#.???## 1,4,1,3
                ?.????.????????? 1,1,1,5,2
                ???.?????#. 3,1
                ???.?#????.?# 1,2,1,1
                ??#?.#??.? 1,3
                .?.??????#.????? 1,4,1,1,2
                #????.#?#???? 1,2,6
                ..#?##??#??.#??#? 1,6,2,1
                .???????#?#???##??# 12,3,1
                .??#?.??#???????.# 1,1,1,1,3,1
                ?..?????##??.?#????? 8,5
                .#?..?.??. 1,1
                ...#??#?.? 1,1,1
                ???#..?.????.#?## 1,1,1,2,4
                #?.???#??#???.#?#??? 2,2,1,2,2,4
                .##?#.??.??????? 4,1,1,1,1
                .?#?#????? 1,1,2
                ???#???.??#.??? 4,3,2
                ?#..#???###?#?#?#? 1,13
                #??#??#??????#???? 1,7,1,1,1,1
                #?.#??#????.??.?###? 1,2,2,1,1,4
                ?#?#?.??????.????. 3,4,1
                .???.#?.??#.?.???# 2,1,1,1,1,3
                .????.?????#?#?. 2,8
                ?#????###??? 1,4
                ??#?##?????????.? 9,2,1,1
                ???#??????????#.? 6,1,1,1
                .??#???#????##??#? 5,6
                ??##???.??.#? 2,1
                ?#?#?##???????????#? 10,1,5
                ?.#?????.?.#????#?? 1,2,7
                ?##?.???????? 2,3,1
                ???.###????.#? 2,4,2
                ??????.??? 1,1,2
                #???.????????.#? 1,1,2,2,1
                #.???????#? 1,3
                .?.##??.?#?.. 3,2
                #.?#.????##?#????.# 1,1,3,5,1
                ?#?????#?#????? 5,1,1,1,2
                ??.#??.?.???.?.#.??# 1,3,2,1,1,3
                .?.?#???#?? 1,4
                ??.#??#?.?#???? 1,4,1,1
                ?.?#????.?.#?# 2,2,3
                ?##?.??#?#?.?#. 3,1,2,1
                ?.??.???.???#???.? 1,2,3,3,1
                ??##?#???####?#??? 4,1,5,1,2
                #.#??????????????#?? 1,1,3,1,1,6
                #?.?.?.#.#?.?????? 1,1,1,1,1,4
                ???#?#.??? 1,3,2
                #?#??#??.##? 1,2,1,3
                ??#??#????? 6,1
                ???.?#???.? 1,1,2
                ?.#..???#??##??? 1,4,4
                ?..#??.#?... 1,1
                ??...????#????.? 1,3,1,3
                ???????#?#??????# 1,1,2,5,1
                ?#???????##?.??? 3,6,2
                ?#????#???? 2,2,1
                ??????#???# 1,5
                ?.????#??.?.??.. 6,1
                .??.??#????#? 1,1,1,5
                ?##.???.?.?# 2,1,2
                ????#??????? 1,2,1,2
                .#.???#????? 1,7
                ???????#?#.? 2,2,3,1
                ?.???#????????#? 1,3,4
                ????????..? 3,2,1
                ?.????#?.????????? 1,1,3,6,1
                ??.#.?#????. 1,1,3,1
                .??#???????#?..? 5,1
                #?.??##?.????# 1,5,1
                ???.?????#??. 3,6
                ?.????..???????##? 2,9
                .?##..??????? 2,1,4
                ?#?????????????#.? 6,4,1,1
                ??#?##?#?? 5,1,1
                ??#????#??????#?? 3,3,1,3
                ????.?#..?#????? 1,1,3,2
                ??#???...#?.?.??. 6,1,1,1
                ?.????#?.#?. 1,1,2,1
                ???#?#?????#?????.?? 6,1,1,1,1,1
                ?????#?#???#??#?#?.. 7,8
                #..#.??.#??#?##??.. 1,1,1,1,6
                ????.?#?#?? 3,6
                ?#.?.#?????? 2,1,2,1
                ??#?#??????????# 11,1
                ?.#??####?????????#? 1,1,4,2,1,2
                ?.?.?#?.??#?? 1,2,3
                ????#???#????#?.???? 1,3,1,5,2
                ???#?.???? 3,3
                ?##??##.???.#?.##. 3,2,1,2,2
                ?###??#?.?#.#??? 4,3,1,2,1
                .?????????##????? 2,8,2
                ?.?#?..??#?????? 3,5,1
                #.??#???#????#.??? 1,12,1
                ..?#????##? 2,2
                ???????#???##???. 2,5,5
                ???#??#??.#???.#.# 3,3,2,1,1,1
                .???#.#?????#??.?## 1,1,1,1,3,2
                #????????#. 3,1,1
                ???#.#??#? 2,4
                ????.##???#???.??? 1,1,9,1,1
                ?.???#?#?.?#???? 6,4
                ????????#?...#? 2,1
                ????#????##???? 1,8,1
                ?.???????#.. 2,4
                ?..?#??#?##? 1,7
                ?#???.#??.???##?? 2,2,4
                ?##.????##??? 2,5
                ??.?#..?.#?#??? 1,2,1,6
                ???#??.?#??????# 4,9
                .?????.????### 5,6
                .##..#??#????... 2,8
                ??#??.?????#?#? 1,1,1,3,4
                ##??#.??#?? 2,1,2
                ??##?###.##?#? 1,6,4
                .???????#?# 2,1,3
                ??.???#?#.??##? 1,2,1,1,5
                ?#???#?#.?#?#??#.? 2,4,2,4
                ??????.??? 1,1
                ??????????? 1,1,4
                ???#?#?????##?? 7,4
                ?##??????. 3,1,2
                ?.#?.???.?.###?? 1,2,3
                ???..??..#.##??. 3,2,1,2
                ?.??.?????#?????# 1,1,1,7
                ??.#.#..#?#? 1,1,1,4
                ##?##???.?????##??.? 2,2,1,8,1
                .?.???.??.?????.?.?? 2,4
                ??.???????.. 1,2
                ?????#????????.#.??? 1,4,3,1,3
                ?????.??#????. 1,2,6
                ?##???##.??.? 8,1,1
                .##??????? 3,1
                ?#?#??????????#?##?. 3,7,1,2
                #????#??.###?##.?? 1,4,1,6,1
                ??#.??#??.? 1,5
                .?#?#???#???## 1,2,7
                ??????#?###??.? 2,9,1
                ???.??##?##.?? 1,4,2
                ?????..????? 1,1,1,1
                ??.?.????#??#?.? 1,1,6,1,1
                ...?.#??#?#?#?? 2,5
                .????#???????.#. 6,1,3,1
                ?.???#????. 1,7
                .?#???#????#?##?? 5,7
                ????..?#??#??#???.? 1,9
                ???##?#.???.?.? 6,1
                #??#??.??##?#???? 1,2,9
                ?.????#??????? 2,9
                ???????.?#. 1,2,1
                #?..??#???.??#?# 2,3,5
                ????..??.??.? 1,1
                ??????##.???? 3,2,1
                ???.?????#?.##? 2,4,3
                #.??#???#.?#?????#?? 1,4,1,1,1,2
                ??.?#????.??#? 2,6,1,1
                #?#.?????.??####??? 1,1,1,2,6,2
                ??.???##?#???## 7,3
                .???.??#?? 1,3
                .??##.?????? 3,1
                ##????#???#?#??#?? 13,2
                .??#??#?..# 7,1
                .?????#?.?#????#?? 7,1,3
                ??#??.??????# 4,3,2
                ??#?#...??###..??.?. 3,3,1,1
                ?#.??#??.?#?..?? 2,3,2,1
                .??#?#?#?## 1,5,2
                ?.#???.??#???#??#? 4,4,5
                ?.??#??.#?.?#??#?. 1,2,1,2,1,3
                ??#??.???????#?#?.?? 3,7
                ?.??#?#?.????# 5,1,1
                ??#?..?##.#?? 1,2,3,3
                .???.#???? 3,1,2
                ???#?.???????? 2,6
                ?.??###???.#.????. 5,1,1,4
                .??#??.?????? 4,2,1,1
                ??.????#.?. 1,2
                #???.?.????????# 1,2,1,2,1
                ???#???????#??#?.?? 2,2,4,1,1
                #??#???#?#??#.???. 5,1,4,2
                ?##??????# 7,1
                ?#?????.?.. 6,1
                ????.?#.???###??. 1,1,7
                ????#.#??. 2,1,3
                ??.#????.??. 1,4,2
                .????#??.???#?.. 6,4
                ?.????#??#?##?.?..?? 11,1
                ?????#.?.????????.# 1,2,2,4,1
                ?????###?#????? 1,1,3,1,1
                ?#??##?#??##. 2,8
                ??..?????#??##. 1,1,1,2,3
                .????#.???#??### 1,1,1,1,3
                ??..##?????##.??.? 1,5,3,1,1
                ??#?#?????# 6,1
                ?????#??????????? 8,4
                ?.???????# 4,1
                ??????.???? 5,1
                ????????#?.??????. 6,3
                .???#???.???# 5,2
                .??????..????#??## 2,9
                #???#???.?? 5,1
                ???????#..??##?? 1,2,6
                ???#????##???????? 2,9
                ?#?.????#??#???#??. 2,1,11
                #??????#???####??.? 8,6
                ????#?#???? 3,3
                ??###.?.?????? 5,1,1
                ????#???#?#?#?##?.. 1,2,9
                ?####?.?.# 5,1,1
                ??##?#??#? 2,1,2
                ?.??##?.?.?##?##??? 5,3,3
                #??#.##?####?#??? 4,9
                ?#??.#????#.?.?? 3,2,3,1,1
                ?????##????#?#??##?# 9,4,2,1
                .????#??????? 3,2,3
                ???????#?#??##?#? 2,1,7,1
                ????????#?#???? 2,1,4
                .?#.#?##??##. 2,5,2
                ??#?#?????#.?#?.?# 9,3,1
                ??.?#???##?????.?? 11,1
                ?.#??????##???#?? 1,1,1,3,3
                ?#???.??????????#?. 3,1,3,1,4
                ?#.?????.#?. 2,1,1
                ????.????? 3,1,2
                #?.#?????#???? 2,7,1
                ??#.?#?#?##??.#?.? 1,1,2,5,1
                ??????#????.. 2,3
                .??#??.?.?..??.? 3,1
                ?#?#.#?.???? 2,1,1,3
                #.?..????#????? 1,1,1,4,1
                ??#???????? 4,4
                ??????.????????#?? 4,1,1,3
                ?#?....????. 2,2
                ??#??#...??# 4,2
                ??????.?????#? 4,1,1,3
                .##?#???#?????.#? 2,7,1,2
                ??#?????#.??#? 4,3,3
                ???#???????? 9,1
                ?.?.#????#??#??.??## 1,10,3
                .?###?#..#.?. 6,1,1
                ?#??..????#?#? 1,1,6
                ..#.?????##?#? 1,1,6
                ???.?.#????##?#?. 1,1,1,1,4
                ?????????.?#??? 1,1,2
                ????#??#??##? 1,2,1,2
                ??#??.?###??????.? 3,8
                ?#????????. 3,1,1
                ???#?#???#??.?#.. 4,4,1
                ?.#??.????#???????? 1,1,7,1,1,1
                ???.??#?##????#? 1,8,1
                ???.?.???????#????? 1,1,1,1,6,1
                ..??#?.???#??? 4,4,1
                ????????#?.???.???? 1,2,3,3,4
                ?????????#??##???. 3,9
                #????..???????.???. 5,4,1,1
                ??#?##???????. 6,5
                ????.?#?.??...#??? 1,1,3,1,1,2
                ?.??.##??.#?????.? 1,2,4,1,2,1
                ?#?????????#???.???? 2,1,9,1,1
                ??.?.?????.?# 1,1,4,1
                .??##?.#?? 4,3
                .??#??##.#???????? 1,1,3,4,3
                #???????#?#?.??.?? 1,3,1,1,1,1
                ????##?#???????????# 1,9,3,1
                ??#??..????????#?.?? 2,9,1
                ??##?#??#.??.#? 5,2,2,1
                ?###?????????.??.??? 4,4,1,1,1
                ????.????????? 2,2
                ????????##?..?. 2,1,3,1
                ?.?.#?#???#??..????? 1,9,3
                ??????#??.?#?#?.?? 1,1,4,1,1,1
                ..????#?????????#?? 1,5,1,7
                ?????????#?#??#..??? 4,8,1
                #??#???#.???.?..? 8,1
                ?#??#?????.#??? 1,6,1
                ???##??#???##???#.. 9,2,2
                ?#????#..#??????#.. 1,4,2,4
                ?????#.?.#?#? 3,3
                ????.#.????.?? 3,1,1,1
                ???#?..#????#??# 2,9
                ???.###????#???????? 4,1,3
                ??.??.?##?#?#???? 2,2,2,6
                ???.???#?#???#??#?? 1,1,1,2,5,3
                .????##?##?##???#?? 1,13
                ??????#????#.#?#? 9,1,4
                ?????#??.#.??????#?? 7,1,8
                ??#??????.??. 1,5,1
                ??##?##????#??. 1,2,5,1,1
                ??###??????.? 4,2,1
                #??????????..??#?.? 11,4
                ??.??#?.???#?##?? 1,1,1,4
                .???.?#??????? 1,3,2
                .#?#??#.????### 6,2,3
                ..??#???##.??#? 1,2,3,3
                ??#?#?.#?#.?..?### 6,1,1,1,3
                ??#????#??????.#. 1,1,4,2,1
                ?????.??##?#??#?##?? 2,1,12
                ??.?.?#???? 1,4
                ??#???#?.???? 2,3,1,1
                .??.#.???..?????#??? 1,1,3,1,6
                ???.?##?#? 2,3,1
                ???????#????? 1,3,1
                ??.????#.#. 1,5,1
                ??..??#??? 1,3,1
                .#??##????#???#?.? 1,12
                #.#?#?????#??##??? 1,4,1,8
                ??????#?#....? 8,1
                ?.?.#????#?????? 1,3,3,1,1
                ????#???.##?#.??.## 7,4,1,2
                #.?.???#?.?# 1,1,1,2
                ?.#???#?#????#??? 3,1,8
                .????.##???.#???? 1,2,4,2,1
                .#??#..???#. 2,1,2
                ???...???#?#????. 2,6
                ??##?.??#.??? 1,3,2,1
                ?#?##????????#?.? 7,4
                ????#.??????. 4,3,1
                ?#??????#. 5,1
                ???.???#??#? 1,7
                ?#????..?#??#? 5,4
                #????????????.?? 1,1,7,2
                ?????#.???#? 1,3,1,1
                .???????????#??? 3,1,1,6
                ??#????#????? 2,2,2
                .#???#??#??????? 2,7,4
                ??????????##???.???? 1,1,9,3
                ????..??.?#? 1,1,2,2
                #?????#?#??#???????? 3,14
                ??#???.?#.? 1,1,2
                ?????????????#?# 2,1,3,3
                ???#.?????##????. 2,6,1,1
                ?????.##???.? 3,4
                ?.#????#?????. 2,7
                .###?????.. 3,2
                .??#??????.#?#. 4,1,1,1,1
                .###?#?##?##????. 11,2
                ??????.??????##????? 1,1,1,9,1
                ???#?.?.?.?? 4,1,1,1
                ??#?##?.??#?????.#? 7,2,3,2
                ???.###??.#??#? 1,1,5,1,2
                ?.?#.?#?.?#????? 1,2,1,2,1
                #??????.##????? 6,3,1
                ?#?#.????. 4,2
                ?.????..?# 2,1
                ?.?.?.##??#????##??? 1,1,14
                ????#?.#???##?#????? 3,1,9,1,1
                ??##????.#?#.#???? 1,5,1,1,5
                ??#??????..?? 3,1,2,1
                #?.??#?###??#.?. 2,2,4,1,1
                ?.#.??#?????? 1,3,1
                ??.???##???.#??? 1,5,1,2,1
                #??##?#?#?.????? 5,1,1,1,1
                ???.???###?? 2,6
                ?#????#?.?#???#???? 2,3,1,5
                ??#?####?????##???. 6,4
                ##.??#???.??????? 2,3,1,4
                ??????.#????#? 1,3,2,4
                #?.?????.???????#?# 2,1,1,10
                .??.?????#???.? 7,1
                ?###.?#.?.?# 3,1,1,1
                #????????.??#????#?# 1,5,2,1,1,1
                ??##?#?#??#?#???# 8,7
                ???.?.???????#.??#? 2,1,1,6,1,2
                ??.?????.?#?? 1,1,1,4
                .????#????##?##??. 3,8
                ?.?????????? 2,4
                ?????????#?#? 4,2,3
                #..??#????#??#.? 1,1,2,2,1
                ?#.???????.??.? 1,1,5,2,1
                ??#?.???????#.??##?? 2,1,2,2,3,1
                ???.???.#??.??? 1,1,1,3,3
                #?#.???#..??? 3,1,1,2
                .#?##.?????#???.? 4,1,3,1
                #?.???????????##?? 1,1,2,8
                ?#??.????? 2,2,1
                ?#?##???#?##??..#? 1,2,1,2,1,1
                .????????#?. 2,4
                .#?.?##???????.?? 1,6,2
                #.??..##???#???.? 1,1,6,1,1
                ?????.###?.??##??#? 1,1,4,1,3,2
                .???#?.??????.?#? 4,6,2
                ????#?#????? 7,3
                ???...#??. 3,3
                .#.?#??????#????#??# 1,7,1,5,1
                .???#???.?? 2,2
                .????.?#.?#??? 3,1,4
                ??.#???#???????. 1,1,7
                ??#?..??????# 2,1,1,1
                ??##????..???.?# 7,3,2
                ?#????#???#??..?##? 1,3,2,3
                ?#.#??????##??###??? 2,4,1,9
                .??#.??###?? 1,1,7
                ??????????? 1,3
                .?????#???. 1,4
                ??????.??#?#???#?? 1,1,9,1
                #?.##?#.???#??? 1,4,1,2,1
                ?###??##????##???? 7,8
                #???..?????.?. 1,1,3,1
                #??????#.?#? 1,2,1,2
                ?.?#??#????.??? 1,4,2
                #.#????##.###?? 1,1,2,3
                ?.?..????.#?..? 1,1,1,2,1
                ?????.#???#???? 3,8
                ??##?##?????#??#.? 4,2,4,2
                ?????????# 1,1,5
                ??.??#???#?????. 1,5,3,1
                ?.#??.#?#????#??? 2,5,3
                .????.?..# 2,1,1
                ?.?.??????#?#? 1,1,7
                ?##????##????###??.? 16,1
                .??????#???#..?..??. 10,1,1
                ?.#?#??.#???? 5,5
                ?????.??#??#??????? 1,1,1,4,1,1
                ???????.?..???..?? 5,1
                ??????##????????? 2,8,1,1
                ??????##???.????# 2,8,2,1
                ##.?#?.#?? 2,2,1
                #?.?#.???????#??? 2,1,7
                ?.????..??#???????? 4,6,1,1
                ???#?##???? 2,6
                ???????....#??#???. 4,4
                .?????.??? 5,2
                ?.##??????? 2,4
                ?##??##?????#????? 8,3,1,1
                .?.#??#?.? 1,3
                ?#?????##?.?#??????? 3,3,1,1,3
                ??.???##?????? 1,11
                ???????#?.?#???? 9,2,1
                ??.?#????#?#????? 1,7,1,1,1
                ?.?????????#??#?#?? 1,1,11,1
                ??.?##????? 1,3,1
                ?#?#?????.##??###?? 2,2,2,8
                ????#???#???#??. 2,11
                ?.????#????## 5,3
                ????#??#?#??.????? 1,1,6,1,1,1
                .??#?#??.???.? 5,2
                #??#?.?#?? 2,1,4
                ?.??#???#.?? 1,5,1
                ??##???#?.???##???? 7,6
                #?.?????###??? 2,1,8
                ??#?#?#???.#??? 1,7,2
                #.?#??#.?? 1,4
                ????????#????.#? 1,5,1,1
                ?#?.???.??? 3,2
                ?????#?.??#?##..#?. 2,1,1,6,1
                ??#?..###???# 2,3,3
                ?.?#.?.?#????# 1,2,7
                ?.##?##??#??.#????## 6,3,1,4
                .#??###??????#. 8,3
                ????#??#..? 4,2
                .???.????.???#?? 3,1,5
                .?#????#?#?#?#????# 1,13
                ?.?#.#..?.???#??# 1,1,1,7
                ???..?#??.??##? 1,2,1,5
                ?.?#?#?#.###??? 1,1,1,1,6
                ???.???#???#?.#?.?. 1,6,2,1,1
                .?.?##..???????? 1,2,6
                .#.?#???#?.?????? 1,3,1,2,2
                #?????#???##??# 3,7,2
                #.?#??#??.??.?? 1,1,4,1,1
                ??#??#???##.??##? 4,2,3
                .?#?.#??#??.???? 1,6,2
                ##.???.???##?? 2,1,5
                .?.#???##?#??? 1,9,1
                ????#?##.????# 4,2,1,2
                ???????##?#?????.? 4,8,1,1
                ????##?#?#??. 1,8""";
        //endregion
    }

    private static final char STATUS_DAMAGED = '#';
    private static final char STATUS_OPERATIONAL = '.';

    private record SpringRecord(List<Character> springs,
                                List<Integer> groupSizes) {
    }

    private static class MemoKey {
        // Using MemoKey instead of just a string is faster for some reason.
        private final List<Character> springStatuses;
        private final List<Integer> damageClusterSizes;

        public MemoKey(List<Character> springs, List<Integer> groupSizes) {
            this.springStatuses = springs;
            this.damageClusterSizes = groupSizes;
        }

        @Override
        public boolean equals(Object o) {
            if (this == o) return true;
            if (o == null || getClass() != o.getClass()) return false;
            MemoKey memoKey = (MemoKey) o;
            return Objects.equals(springStatuses, memoKey.springStatuses) &&
                    Objects.equals(damageClusterSizes, memoKey.damageClusterSizes);
        }

        @Override
        public int hashCode() {
            return Objects.hash(springStatuses, damageClusterSizes);
        }
    }

    private static int part;
    private static String dataStr;
    private static List<SpringRecord> springRecords;

    private static void setupSprings() {
        springRecords = new ArrayList<>();
        Arrays.stream(dataStr.split("\n")).forEach(rowStr -> {

            String[] row = rowStr.split(" ");
            String springsStr = row[0];
            String sizesStr = row[1];

            if (part == 2) {
                springsStr += ("?" + springsStr).repeat(4);
                sizesStr += ("," + sizesStr).repeat(4);
            }

            List<Character> springs = springsStr.chars()
                    .mapToObj(c -> (char) c)
                    .toList();

            List<Integer> sizes = Arrays.stream(sizesStr.split(","))
                    .map(Integer::parseInt)
                    .toList();

            springRecords.add(new SpringRecord(springs, sizes));
        });
    }

    private static final Map<MemoKey, Long> countsMap = new HashMap<>();

    protected static long countViableSolutions(List<Character> springStatuses, List<Integer> damagedClusterSizes){
        long viableSolutions = 0;
//        String memoKey = springStatuses.toString() + damagedClusterSizes.toString(); // Make a key to store the solution.
        MemoKey memoKey = new MemoKey(springStatuses, damagedClusterSizes); // 200ms faster, I wish I knew why.

        if (countsMap.containsKey(memoKey)) {
            return countsMap.get(memoKey); // If memoKey already exists, reuse the solution rather than recalculate.
        }

        if (damagedClusterSizes.isEmpty()) { // Check if groupings to look for have been exhausted.
            // If there are none to find and none present, the solution counts; otherwise, it does not.
            long computedResult = springStatuses.contains(STATUS_DAMAGED) ? 0 : 1;

            countsMap.put(memoKey, computedResult);
            return computedResult;
        }

        int currentClusterSize = damagedClusterSizes.get(0);
        List<Integer> clusterSizesToGo = damagedClusterSizes.subList(1, damagedClusterSizes.size());
        int damagedSpringsToFindCount = clusterSizesToGo.stream().mapToInt(Integer::intValue).sum();

        for (int i = 0; i < springStatuses.size() - damagedSpringsToFindCount - clusterSizesToGo.size() - currentClusterSize + 1; i++) {
            if (springStatuses.subList(0, i).contains(STATUS_DAMAGED)) {
                break;
            }

            int nextSpringIndex = i + currentClusterSize;
            boolean nextSpringInBounds = nextSpringIndex <= springStatuses.size();
            boolean nextClusterContainsOperational = springStatuses.subList(i, nextSpringIndex).contains(STATUS_OPERATIONAL);
            boolean nextSpringIsLastOrNotDamaged = nextSpringIndex == springStatuses.size() || springStatuses.get(nextSpringIndex) != STATUS_DAMAGED;

            if (nextSpringInBounds && !nextClusterContainsOperational && nextSpringIsLastOrNotDamaged) {

                List<Character> nextRecord =  nextSpringIndex + 1 < springStatuses.size() ?
                        springStatuses.subList(nextSpringIndex + 1, springStatuses.size()) :
                        List.of();

                viableSolutions += countViableSolutions(nextRecord, clusterSizesToGo);
            }
        }

        countsMap.put(memoKey, viableSolutions); // Add the viableSolutions to known solutions.
        return viableSolutions;
    }

    public static void main(Object... args) {
        part = Integer.parseInt(String.valueOf(args[0]));
        boolean isDemo = args.length > 1 && args[1].equals(true);
        dataStr = isDemo ? DEMO_DATA : DATA;
        long startTime = System.nanoTime();
        long expectedResult;
        long actualResult;

        setupSprings();

        if (part == 1) {
            expectedResult = isDemo ? PART_ONE_DEMO_EXPECTED_RESULT : PART_ONE_EXPECTED_RESULT;
        }
        else {
            expectedResult = isDemo ? PART_TWO_DEMO_EXPECTED_RESULT : PART_TWO_EXPECTED_RESULT;
        }


        actualResult = springRecords.stream()
                .map(springRecord -> countViableSolutions(springRecord.springs(), springRecord.groupSizes()))
                .mapToLong(Long::longValue)
                .sum();

        Utils.publishResult(startTime, expectedResult, actualResult);
    }
}
